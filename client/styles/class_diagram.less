@stroke-width  : 0.2mm;
@btn-size      : 45px;
@shifter-width : 35px;
@relation-zone : 10;

@import 'utils';

.class-diagram {

	svg {
		background-clip   : border-box;
		background-image  : url('../imgs/class_diagram_bg.svg');
		background-repeat : repeat;
		background-color  : white;

		text {
			font-family : Consolas monospace;
		}
	}

	.essential {
		cursor : default;
		
		text {
			cursor : inherit;
		}

		.border {
			stroke : black;
			stroke-width : @stroke-width;
		}

		.header {
			text {
				text-anchor : middle;
				.vertical-centering();
			}

			text.name {
				font-size : 14px;
			}

			text.stereotype {
				font-size : 11px;
			}
		}

		&.abstract .header text {
			font-style : italic;
		}

		&.moved {
			cursor : move;
			stroke-dasharray : 1, 2;

			text {
				stroke : black;
				fill   : none;
				stroke-width : 1;
			}
		}

		&.chosen {
			.border {
				stroke-width : @stroke-width * 1.7;
			}

			.section-separator {
				stroke-width : @stroke-width * 1.7;
			}

			.element-separator {
				stroke-width : @stroke-width;
			}
		}

		.member {
			text, tspan {
				font-size : 10px;
			}
		}

		.member .underline {
			stroke : gray;
			stroke-width : 1px;
		}

		.section-separator, .element-separator {
			stroke : black;
		}

		.section-separator {
			stroke-width : @stroke-width;
		}

		.element-separator {
			stroke-width : @stroke-width / 2;
		}
	}

	hr {
		margin : 10px 0;
	}
	
	input, select {
		margin-top    : 0;
		margin-bottom : 0;
	}

	.control-menu {
		@diff : -@btn-size / 2;

		.btn-rm-essential {
			top  : @diff;
			left : @diff;
		}

		.btn-edit-essential {
			top   : @diff;
			right : @diff;
		}

		.btn-color-essential {
			bottom : @diff;
			left   : @diff;
		}

		.btn-link-essential {
			bottom : @diff;
			left   : 50%;

			margin-left : -@btn-size / 2;
		}
	}

	.creating-menu {
		width  : 0;
		height : 0;

		@diff : -@btn-size * 1.5;

		.btn-make-class {
			left : 0;
			top  : @diff;

			margin-left : -@btn-size / 2;
		}

		.btn-make-interface {
			right  : @diff * 1.2;
			bottom : @diff;
		}

		.btn-make-note {
			left   : @diff * 1.2;
			bottom : @diff;
		}
	}

	.control-menu, .creating-menu {
		position   : absolute;
		background : none;

		.btn {
			border-radius : 50%;
			position : absolute;
			width    : @btn-size;
			height   : @btn-size;
			padding  : 0;
		}
	}

	.popover {
		display    : block;
		max-height : 100%;
		max-width  : none;
	}

	.fade {
		visibility : hidden;
	}

	.fade.in {
		visibility : visible;
	}

	.essential-menu {
		width : 334px;

		.class-name {
			width : 256px;
			text-align : center;
		}

		.colors {
			text-align : center;

			.color {
				display : inline-block;
				width   : 15px;
				height  : 15px;
				margin  : 3px;
				border  : 1px solid;
				border-radius : 15%;
			}

			.active-color {
				border-width : 2px;
			}
		}

		.attribute, .operation {
			margin-bottom : 10px;
		}

		.btn {
			width   : 32px;
			height  : 32px;
			padding : 0;
		}

		.visibility {
			width : 45px;
		}

		.name {
			width : 100px;
		}

		.operations {
			.name {
				width : 78px;
			}

			.type {
				width : 40px;
			}

			.params, .btn-add-param {
				margin-left : 49px;
			}
		}

		.param-name {
			width : 90px;
		}

		.param-type {
			width : 60px;
		}

		.type {
			width : 50px;
		}
	}

	.relationship-menu {
		width : 283px;

		.types .btn, .rm-relationship {
			width   : 32px;
			height  : 32px;
			padding : 0;
		}

		.rm-relationship {
			float : left;
			margin-right : 10px;
		}

		.multiplicity {
			width : 66px;
		}

		.indicator {
			width : 170px;
		}
	}

	.relationship {
		stroke : black;
		stroke-width : 1px;
		fill : none;

		text {
			text-anchor : middle;
			.vertical-centering();
			font-size : 8px;
			fill : black;
			stroke : none;
			font-weight : bold;
		}

		.from-indicator, .to-indicator {
			.vertical-centering();
		}
	}

	.aggregation .tip, .generalization .tip, .realization .tip {
		fill : white;
	}

	.composition .tip {
		fill : black;
	}

	.realization, .dependency {
		stroke-dasharray : 3, 3;

		.tip {
			stroke-dasharray : none;
		}
	}

	.relationship-zone {
		stroke-width : @relation-zone;
		fill    : none;
		stroke  : black;
		opacity : 0;

		.transition(opacity 0.3s);

		&.chosen {
			opacity : .1;
		}
	}

	.fake {
		stroke : gray !important;
		fill : gray !important;
		stroke-dasharray : 3, 3;
	}

	.shifter {
		position : absolute;
		opacity  : 0;
		background-color : black;

		.transition(opacity 0.3s);

		&.active {
			opacity : 0.2;
		}
	}

	.top-shifter, .bottom-shifter {
		left   : 0;
		right  : 0;
		height : @shifter-width;
	}

	.left-shifter, .right-shifter {
		top    : 0;
		bottom : 0;
		width  : @shifter-width;
	}

	.top-shifter {
		top : 0;
	}

	.right-shifter {
		right : 0;
	}

	.bottom-shifter {
		bottom : 0;
	}

	.left-shifter {
		left : 0;
	}

	.top-left-shifter,  .bottom-left-shifter,
	.top-right-shifter, .bottom-right-shifter {
		width  : @shifter-width * 2;
		height : @shifter-width * 2;
		border-radius : @shifter-width * 2/3;
	}

	.top-left-shifter {
		top  : -@shifter-width;
		left : -@shifter-width;
	}

	.top-right-shifter {
		top   : -@shifter-width;
		right : -@shifter-width;
	}

	.bottom-right-shifter {
		bottom : -@shifter-width;
		left   : -@shifter-width;
	}

	.bottom-left-shifter {
		bottom : -@shifter-width;
		right  : -@shifter-width;
	}
}